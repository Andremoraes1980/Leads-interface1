<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Gerenciador de Leads</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: space-around;
      padding: 20px;
      background-color: #f4f4f4;
    }
    .column {
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      width: 30%;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      min-height: 300px;
    }
    .lead {
      border: 1px solid #ddd;
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      background-color: #fafafa;
      cursor: move;
    }
    .lead strong {
      display: block;
      margin-top: 5px;
    }
    .lead img {
      width: 20px;
      vertical-align: middle;
      margin-right: 5px;
    }
  </style>
</head>
<body onload="carregarLeads()">

  <div class="column" id="coluna-nova-proposta" ondrop="drop(event)" ondragover="allowDrop(event)">
    <h2>Nova Proposta</h2>
  </div>
  <div class="column" id="coluna-em-atendimento" ondrop="drop(event)" ondragover="allowDrop(event)">
    <h2>Em Atendimento</h2>
  </div>
  <div class="column" id="coluna-venda-realizada" ondrop="drop(event)" ondragover="allowDrop(event)">
    <h2>Venda Realizada</h2>
  </div>

  <script>
    const leads = [
      {
        nome: "Jo√£o Silva",
        telefone: "(11) 99999-9999",
        origem: "Webmotors",
        status: "Nova Proposta"
      },
      {
        nome: "Maria Souza",
        telefone: "(21) 98888-8888",
        origem: "OLX",
        status: "Em Atendimento"
      },
      {
        nome: "Carlos Lima",
        telefone: "(31) 97777-7777",
        origem: "Facebook",
        status: "Venda Realizada"
      }
    ];

    function carregarLeads() {
      leads.forEach(adicionarLeadNaColuna);
    }

    function adicionarLeadNaColuna(lead) {
      const leadElement = document.createElement("div");
      leadElement.className = "lead";
      leadElement.draggable = true;
      leadElement.ondragstart = drag;
      leadElement.innerHTML = `
        <strong>${lead.nome}</strong>
        <span>${lead.telefone}</span><br>
        <img src="${getIconeOrigem(lead.origem)}" alt="${lead.origem}"> ${lead.origem}
      `;

      let coluna;
      if (lead.status === "Nova Proposta") {
        coluna = document.getElementById("coluna-nova-proposta");
      } else if (lead.status === "Em Atendimento") {
        coluna = document.getElementById("coluna-em-atendimento");
      } else if (lead.status === "Venda Realizada") {
        coluna = document.getElementById("coluna-venda-realizada");
      }

      if (coluna) {
        coluna.appendChild(leadElement);
      }
    }

    function getIconeOrigem(origem) {
      const origens = {
        "Webmotors": "webmotors.png",
        "Mercado Livre": "mercadolivre.png",
        "OLX": "olx.png",
        "iCarros": "icarros.png",
        "Facebook": "facebook.png",
        "Instagram": "instagram.png"
      };
      return `./img/${origens[origem] || "default.png"}`;
    }

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text/plain", ev.target.innerHTML);
      ev.dataTransfer.setData("origem", ev.target.parentNode.id);
      ev.target.id = "dragging"; // marcar o elemento
    }

    function drop(ev) {
      ev.preventDefault();
      const data = ev.dataTransfer.getData("text/plain");
      const origemId = ev.dataTransfer.getData("origem");

      const dragging = document.getElementById("dragging");
      if (dragging) {
        dragging.removeAttribute("id");
        ev.target.appendChild(dragging);
      }
    }
  </script>
</body>
</html>
